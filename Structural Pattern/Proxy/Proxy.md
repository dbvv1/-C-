代理模式（Proxy Pattern）是一种结构型设计模式，它为其他对象提供一种代理以控制对这个对象的访问。代理模式可以用于延迟对象的创建和初始化、控制对对象的访问、在访问对象时进行额外的处理等。


### 代码解释
1. **抽象主题接口（Subject）**：
    - 定义了 `Request` 方法，所有具体主题和代理类都要实现这个接口。

2. **真实主题类（RealSubject）**：
    - 实现了 `Subject` 接口，提供了实际的请求处理逻辑。

3. **代理类（Proxy）**：
    - 同样实现了 `Subject` 接口，包含一个对真实主题对象的引用。
    - 在 `Request` 方法中，代理类首先进行访问控制（通过 `CheckAccess` 方法），然后调用真实主题对象的 `Request` 方法，最后进行日志记录（通过 `LogAccess` 方法）。

4. **客户端代码（main 函数）**：
    - 创建了 `RealSubject` 和 `Proxy` 对象，并通过代理对象调用 `Request` 方法。
    - 代理对象在调用真实主题对象的方法之前和之后进行了额外的处理，如访问控制和日志记录。

### 优点
1. **控制访问**：代理模式可以在不修改真实主题的情况下，控制对真实主题的访问。
2. **延迟初始化**：代理可以在需要时才创建真实对象，实现延迟初始化，节省资源。
3. **添加职责**：可以在调用真实对象的方法前后添加额外的处理，如权限检查、日志记录等。
4. **隔离复杂性**：代理可以隐藏真实对象的复杂性，对客户端提供简化的接口。

### 缺点
1. **性能开销**：由于增加了一层间接调用，可能会导致性能开销。
2. **实现复杂**：代理模式增加了系统的复杂性，尤其是在实现智能代理时，需要处理更多的逻辑。
3. **一致性问题**：在某些情况下，代理对象和真实对象可能会导致状态不一致的问题。

### 适用场景
1. **远程代理**：为一个位于不同地址空间的对象提供局部代表，隐藏对象的远程调用细节。
2. **虚拟代理**：根据需要创建开销大的对象，使用代理对象来控制对真实对象的访问。
3. **保护代理**：控制对原始对象的访问，提供不同级别的使用权限。
4. **智能引用代理**：在访问真实对象时，提供额外的操作，如引用计数、记录日志等。

通过理解代理模式的抽象结构和具体实现，可以在实际开发中有效地控制对对象的访问、延迟对象的初始化、添加额外的职责，从而构建更加灵活和可维护的系统。